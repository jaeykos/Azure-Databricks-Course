(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"+ogh":function(module,exports,e){},HbX8:function(module,e,t){"use strict";var r=t("3tO9"),n=t.n(r),o=t("2BcA");e.a=function(e){if(!e.currentForum)return e;var t=e.courseForums.concat(e.mentorForums).concat(e.groupForums),r=t.find((function(e){return e.forumType.typeName===o.j.rootForumType})),i=e.currentForum;e.currentForum.parentForumId&&e.currentForum.parentForumId!==r.id&&(i=t.find((function(t){return t.id===e.currentForum.parentForumId})));var s=t.filter((function(e){return e.parentForumId===i.id}));return s.unshift(i),n()(n()({},e),{},{listedForums:s,parentForumId:i.id})}},KomV:function(module,exports,e){var t=e("+ogh"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},"cD+G":function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("q1tI"),i=t.n(o),s=t("eJMc"),a=t.n(s),c=t("TSYQ"),u=t.n(c),d=t("17x9"),l=t.n(d),p=t("F/us"),m=t.n(p),b=t("+LJP"),h=t("W1i5"),f=t("BVC1"),g=t("5+aF"),S=t("GqWO"),v=t("HbX8"),I=t("ii1C"),y=t("weTL"),j=t("BZ+2"),O=t("zFZo"),T=t("GP6s"),x=t.n(T),F=t("vJ/u"),w=t.n(F),N,k=function(e){function SubforumSidebar(){return e.apply(this,arguments)||this}var t;return n()(SubforumSidebar,e),SubforumSidebar.prototype.render=function render(){var e=this.props,t=e.listedForums,r=e.currentForumId,n=e.parentForumId,o=e.courseSlug;if(!t||t.length<=1)return null;return(i.a.createElement("div",{className:"rc-SubforumSidebar card-rich-interaction flex-1"},i.a.createElement("h2",{className:"subforums-list-title headline-1-text color-secondary-text"},x()("Subforums")),i.a.createElement("ul",{className:"nostyle"},t.map((function(e){var t=u()("forum-title",{"body-2-text":e.id===r,"body-1-text":e.id!==r}),s=f.a.join(Object(S.j)(o),e.link),c=Object(S.m)(e.forumId);return i.a.createElement("li",{className:"subforum-entry"},i.a.createElement(a.a,{key:e.id,to:s,className:"nostyle","aria-current":e.id===r},e.id===r&&(N||(N=i.a.createElement("div",{className:"current-forum-indicator"}))),i.a.createElement("div",{className:t},e.id===n?x()("All"):e.title)))})))))},SubforumSidebar}(i.a.Component);k.propTypes={courseSlug:l.a.string,listedForums:l.a.arrayOf(l.a.oneOfType([l.a.instanceOf(j.a),l.a.instanceOf(O.a),l.a.instanceOf(y.a)])),currentForumId:l.a.string,parentForumId:l.a.string},e.a=m.a.compose(Object(g.a)({fields:["link","title","description","parentForumId"]}),Object(b.a)(I.a),Object(h.a)(v.a))(k)},cIEV:function(module,exports,e){var t=e("wRXl"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},hSS9:function(module,exports,e){var t=e("x8YA"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},nXbJ:function(module,exports,e){},"vJ/u":function(module,exports,e){var t=e("nXbJ"),r;"string"==typeof t&&(t=[[module.i,t,""]]);var n={transform:void 0},o=e("aET+")(t,n);t.locals&&(module.exports=t.locals)},wRXl:function(module,exports,e){},wZgz:function(module,e,t){"use strict";t.r(e);var r=t("VkAN"),n=t.n(r),o=t("VbXa"),i=t.n(o),s=t("AeFk"),a=t("q1tI"),c=t.n(a),u=t("17x9"),d=t.n(u),l=t("F/us"),p=t.n(l),m=t("+LJP"),b=t("W1i5"),h=t("BVC1"),f=t("8Hdl"),g=t("jrIE"),S=t("7GkZ"),v=t("5+aF"),I=t("cD+G"),y=t("zwd1"),j=t("wvSq"),O=t("3tO9"),T=t.n(O),x=t("kvW3"),F=t("oEt1"),w=t("eJMc"),N=t.n(w),k=t("JacN"),D=t("as3Y"),A=t("QXTe"),C=t("py0D"),P=t("u6zc"),E=t("T/K2"),U=t("abvH"),q=t("NMx/"),B=t("dJDe"),R=t("kRCD"),M=t("sWYI"),V=t("2BcA"),L=t("GqWO"),z=t("2xl4"),J=t("WE4C"),Y=t("6JtA"),W=t("Nxpp"),X=t("8cuT"),G=t("ii1C"),H=t("e8+g"),Q=t("GP6s"),Z=t.n(Q),K=t("++Ya"),ee,te,re,ne=function styles(e){return Object(s.c)(ee||(ee=n()(["\n\t.back-area {\n\t\tmargin-right: ",";\n\t\t.back-arrow {\n\t\t\tpadding-left: ",";\n\t\t\tmargin-right: ",";\n\t\t\tmargin-bottom: 10px;\n\t\t\ttransition: all 0.1s ease-in-out;\n\t\t}\n\t\t&:hover {\n\t\t\t.back-arrow {\n\t\t\t\tpadding: ",";\n\t\t\t\ttransition: all 0.1s ease-in-out;\n\t\t\t}\n\t\t}\n\t}\n\t.discussion-content {\n\t\tmargin-top: 20px;\n\t\t.frost-container {\n\t\t\tposition: relative;\n\t\t}\n\t\th1 {\n\t\t\tmargin-top: 0;\n\t\t}\n\t}\n\t.mentor-message {\n\t\tline-height: 30px;\n\t\theight: 30px;\n\t\twidth: 100%;\n\t\tbackground-color: #ff0;\n\t\tborder: 1px solid #e5e600;\n\t}\n\t.sr-only {\n\t\tposition: absolute;\n\t\twidth: 1px;\n\t\theight: 1px;\n\t\tmargin: -1px;\n\t\tpadding: 0;\n\t\toverflow: hidden;\n\t\tclip: rect(0, 0, 0, 0);\n\t\tborder: 0;\n\t}\n\t.metadata {\n\t\tline-height: 18px;\n\t\t.rc-NextViewName {\n\t\t\tmargin-left: ",";\n\t\t}\n\t}\n\t.action-area {\n\t\tbutton {\n\t\t\tborder: none;\n\t\t\tbackground-color: inherit;\n\t\t\t&:hover {\n\t\t\t\tcolor: $color-primary;\n\t\t\t}\n\t\t}\n\t}\n\t.rc-CML {\n\t\tmargin: ",";\n\t}\n\t.rc-DetailedQuestion {\n\t\tmargin-top: ",";\n\t}\n\t.rc-HighlightedReply {\n\t\tmargin-top: ",";\n\t}\n\t.rc-RepliesList {\n\t\tmargin-top: ",";\n\t\tpadding: ",";\n\t}\n\t.reply-container {\n\t\tpadding: ",";\n\t\tmargin-top: 48px;\n\t\tborder-radius: 3px;\n\t\tbackground-color: #00f;\n\t\t.rc-ProfileArea {\n\t\t\tmargin: ",";\n\t\t}\n\t\t.rc-ReplyCML {\n\t\t\tflex: 1;\n\t\t}\n\t}\n\t.rc-ThreadSettings {\n\t\tmargin-bottom: 10px;\n\t}\n\n  @media {\n    $phone-or-smaller {\n      .rc-ThreadDetail .rc-DetailedQuestion {\n      padding: ",";\n    }\n  }\n\n"])),e.spacing(8),e.spacing(4),e.spacing(4),e.spacing(0,4,0,0),e.spacing(4),e.spacing(8,0,16),e.spacing(24),e.spacing(24),e.spacing(24),e.spacing(0,0,24,0),e.spacing(12),e.spacing(4),e.spacing(24,12))},oe=V.d.limitPerPage,ie=function(e){function ThreadDetail(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).state={canTeach:!1,inputClickCounter:0},t._isMounted=!1,t.fetchAnswerPosition=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=t.props,n=r.answerId,o=r.questionId,i=r.courseId,s=r.courseSlug,a=r.userId,c=r.contextId,u=r.currentForum,d=r.currentForumUrl,l=r.sort,p=r.page,m=e||n;if(!m)return;var b=Object(K.c)([i,m]);Object(z.b)(b,l,oe).then((function(e){e===p?t.context.executeAction(k.b,{questionId:o,courseId:i,courseSlug:s,userId:a,contextId:c,sort:l,page:p,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole}):t.context.router.replace({pathname:t.context.router.location.pathname,params:{},query:T()(T()({},t.context.router.location.query),{page:e})})})).fail((function(){var e=d;t.context.router.replace(Object(L.a)(e,o)),t.context.executeAction(k.b,{userId:a,courseId:i,courseSlug:s,contextId:c,questionId:o,sort:V.f.detailSort,page:V.f.detailPage,forumType:u&&u.forumType.typeName,includeDeleted:t.props.hasModerationRole})})).done()},t}i()(ThreadDetail,e);var t=ThreadDetail.prototype;return t.componentWillMount=function componentWillMount(){var e=this.props,t=e.questionId,r=e.sort,n=e.page,o=e.answerId,i=e.userId,s=e.courseId,a=e.courseSlug,c=e.contextId,u=e.currentForum;this.context.executeAction(k.d,{questionId:t,userId:i,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName}),o||1===n&&r===V.f.detailSort||this.context.executeAction(k.b,{questionId:t,userId:i,courseId:s,courseSlug:a,contextId:c,sort:r,page:n,forumType:u&&u.forumType.typeName,includeDeleted:this.props.hasModerationRole})},t.componentDidMount=function componentDidMount(){this.getRole(),this.fetchAnswerPosition(),this._isMounted=!0},t.componentWillReceiveProps=function componentWillReceiveProps(e){var t=e.questionId,r=e.userId,n=e.courseId,o=e.courseSlug,i=e.contextId,s=e.sort,a=e.page,c=e.currentForum;e.sort!==this.props.sort||e.page!==this.props.page?this.context.executeAction(k.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:i,sort:s,page:a,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}):this.props.answerSavingState===V.m.SAVING&&e.answerSavingState===V.m.SAVED&&(this.context.executeAction(k.b,{questionId:t,userId:r,courseId:n,courseSlug:o,contextId:i,sort:s,page:a,forumType:c&&c.forumType.typeName,includeDeleted:this.props.hasModerationRole}),this.context.router.push({pathname:window.location.pathname,params:{},query:{sort:V.c.newestSort}}))},t.componentDidUpdate=function componentDidUpdate(e,t,r){(e.questionId!==this.props.questionId||e.currentForum&&e.currentForum.id!==this.props.currentForum.id)&&this.markRead()},t.componentWillUnmount=function componentWillUnmount(){this._isMounted=!1},t.getRole=function getRole(){var e=this,t=this.props,r=t.authenticated,n=t.isSuperuser,o=t.currentForum,i=o&&o.forumType.definition.groupId;i?Object(W.a)(i,r,n).then((function(t){e._isMounted&&e.setState({canTeach:t})})):this.setState({canTeach:this.props.hasModerationRole})},t.getBackLinkDescription=function getBackLinkDescription(){return this.props.currentForum.title},t.markRead=function markRead(){J.a.markRead(this.props.questionId)},t.render=function render(){var e=this,t=this.props,r=t.question,n=t.isClosed,o=t.isPinned,i=t.currentForumUrl,a=t.currentForum,c=t.sort,u=t.page,d=t.questionId,l=t.answerId,p=t.latestNewThreadId,m=t.commentId,b=t.courseId,h=i,f=a&&a.forumType.typeName,g=V.j.mentorForumType,S=V.j.groupForumType,v=a&&[g,S].indexOf(f)<0,I=v,y=this.state.canTeach&&r&&v,j=r?Object(F.c)(r):"undefined-thread-legend",O=this.state.inputClickCounter,T=Object(Y.a)();return Object(s.d)("div",{className:"rc-ThreadDetail"},r&&Object(s.d)("h2",{id:j,className:"screenreader-only"},Object(s.d)(x.b,{message:Z()("Thread: {title}"),title:r.content.question})),y&&Object(s.d)(A.a,{isPinned:o,question:r}),p===d&&Object(s.d)("div",{className:"sr-only","aria-live":"polite"},Object(s.d)(x.b,{message:Z()("Your new thread was created")})),Object(s.d)("div",{className:"discussion-content"},Object(s.d)("div",{className:"horizontal-box align-items-vertical-center align-items-spacebetween"},Object(s.d)(N.a,{to:this.props.backLink,className:"back-area nostyle"},Object(s.d)("div",{className:"horizontal-box align-items-vertical-center"},te||(te=Object(s.d)("i",{className:"back-arrow cif-arrow-left c-back-arrow-image"})),Object(s.d)("h1",{className:"headline-2-text c-back-label"},this.getBackLinkDescription()))),this.state.canTeach&&r&&Object(s.d)(M.a,{question:r,shouldShowMoveThread:I})),Object(s.d)("div",{className:"frost-container"},Object(s.d)("div",null,Object(s.d)(D.a,{goToInput:function goToInput(){return e.setState({inputClickCounter:O+1})},question:r,isPinned:o,forumLink:h}),n&&Object(s.d)("div",{className:"c-thread-locked card-no-action color-secondary-text"},Object(s.d)("div",{className:"horizontal-box align-items-absolute-center"},re||(re=Object(s.d)("i",{className:"cif-lock"})),Z()("This thread is closed. You cannot add any more responses.")))),Object(s.d)("div",null,Object(H.a)(b,f)&&Object(s.d)(E.a,{answerId:l,commentId:m,forumLink:h,questionId:d,fetchAnswerPosition:this.fetchAnswerPosition}),r&&Object(s.d)(U.a,{page:u,sort:c,answerId:l,commentId:m,forumLink:h,questionId:d,fetchAnswerPosition:this.fetchAnswerPosition}),!n&&Object(s.d)("div",{className:"reply-container horizontal-box"},Object(s.d)(P.a,{fullName:T.get("fullName"),externalUserId:T.get("externalUserId"),profileImageUrl:T.getProfileImageUrl()}),r&&Object(s.d)(q.a,{question:r,parentPost:r,savingState:this.props.answerSavingState,shouldFocusCounter:this.state.inputClickCounter,ariaLabel:Z()("Reply to this thread"),ariaDescribedBy:j})),r&&r.state&&r.state.deleted&&Object(s.d)(C.a,{entry:r,hideUndoDelete:!1})))))},ThreadDetail}(c.a.Component);ie.contextTypes={executeAction:d.a.func.isRequired,router:d.a.object.isRequired};var se=p.a.compose(Object(X.a)(["ThreadDetailsStore","ThreadsStore","ThreadSettingsStore","CourseStore","ApplicationStore"],(function(e,t){var r=e.ThreadDetailsStore,n=e.ThreadsStore,o=e.ThreadSettingsStore,i=e.CourseStore,s=e.ApplicationStore,a=t.questionId,c=r.getQuestion(a),u=n.threadToInsert&&n.threadToInsert.questionId;return{question:c,courseId:i.getCourseId(),courseSlug:i.getCourseSlug(),answerSavingState:c&&r.savingStates[c.id],isClosed:o.isClosed(),isPinned:o.isPinned(),latestNewThreadId:u,userId:s.getUserData().id,authenticated:s.isAuthenticatedUser(),isSuperuser:s.isSuperuser()}})),Object(v.a)({fields:["link","title"],subcomponents:[B.a,q.a,R.a]}),Object(m.a)(G.a))(ie),ae=t("cwGm"),ce=t("ypD2"),ue=t("fg2g"),de=t("HbX8"),le=t("zfwB"),pe=t("KomV"),me,be,he,fe=function(e){function ThreadsView(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=e.call.apply(e,[this].concat(n))||this).renderBreadCrumbs=function(){var e,r=t.props.currentForum,n,o=!!t.context.router.params.question_id;r.parentForumId&&t.props.listedForums.forEach((function(e){null!=r&&r.parentForumId&&e&&e.id&&r.parentForumId===e.id&&(n=e)}));var i=[{label:Z()("Discussion Forums"),href:Object(L.h)()}],a=n?{label:n.title,href:h.a.join(Object(L.j)(t.props.courseSlug),n.link)}:void 0,c;return a&&i.push(a),!(null===(e=t.context.router.location.query)||void 0===e||!e.q)?((i=[]).push({label:Z()("Course Overview"),href:Object(L.i)(t.props.courseSlug)}),i.push({label:Z()("Forums"),href:Object(L.h)()}),i.push({label:Z()("Search results")})):o?i.push({label:r.title,href:h.a.join(Object(L.j)(t.props.courseSlug),r.link)}):i.push({label:r.title}),Object(s.d)(le.a,{separator:me||(me=Object(s.d)(g.a,{size:16,color:"#1F1F1F"})),className:"breadcrumbs",links:i})},t}i()(ThreadsView,e);var t=ThreadsView.prototype;return t.renderSubscriptionButton=function renderSubscriptionButton(){var e=this.props.currentForum;if(!e||e.forumType.typeName===V.j.itemForumType)return null;return Object(s.d)("div",{className:"flex-1"},Object(s.d)(y.a,{forumId:this.props.currentForum&&this.props.currentForum.id,forumType:this.props.currentForum&&this.props.currentForum.forumType.typeName,groupId:this.props.currentForum&&this.props.currentForum.forumType.definition.groupId}))},t.render=function render(){var e,t=this.props.currentForum;if(!t)return Object(s.d)("div",{className:"forum-name headline-5-text color-primary-text"},Z()("Oops! Looks like this thread isn't viewable or does not exist."));var r=t.title,o=t.description,i=t.id,a=!!this.context.router.params.question_id,c=!(null===(e=this.context.router.location.query)||void 0===e||!e.q);return Object(s.d)("div",{className:"rc-personalization_ThreadsView"},Object(s.d)("div",{className:"horizontal-box vertical-when-tablet"},Object(s.d)("div",{className:"flex-2 threads-view-header"},this.renderBreadCrumbs(),Object(s.d)("div",null,!a&&!c&&Object(s.d)(f.a,{variant:"h1semibold",css:Object(s.c)(be||(be=n()(["\n                    margin-bottom: 12px;\n                    line-height: 36px;\n                  "])))},r),!a&&!c&&Object(s.d)("div",{className:"forum-description horizontal-box"},Object(s.d)(S.a,{cml:o,isCdsEnabled:!0}),Object(s.d)("div",null,this.renderSubscriptionButton())))),he||(he=Object(s.d)("div",{className:"flex-1 align-self-end session-switcher-container"},Object(s.d)(ue.a,null)))),Object(s.d)("div",{className:"horizontal-box align-items-top vertical-when-tablet"},Object(s.d)(j.a,{className:"flex-2 discussions-body-column",key:i})))},ThreadsView}(c.a.Component);fe.contextTypes={router:d.a.object.isRequired};var ge=e.default=Object(l.compose)(Object(v.a)({fields:["title","description","link"],subcomponents:[I.a,ae.a,se,ce.a]}),Object(m.a)(G.a),Object(b.a)(de.a))(fe)},x8YA:function(module,exports,e){},zfwB:function(module,e,t){"use strict";var r=t("pVnL"),n=t.n(r),o=t("VbXa"),i=t.n(o),s=t("TSYQ"),a=t.n(s),c=t("CsdX"),u=t("q1tI"),d=t.n(u),l=t("eJMc"),p=t.n(l),m=t("F/us"),b=t("cIEV"),h=function emptyFunction(){},f,g=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}i()(Breadcrumbs,e);var t=Breadcrumbs.prototype;return t.getFilteredLinks=function getFilteredLinks(){var e;return this.props.links.slice().filter(m.identity)},t.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,o=e.separator,i=e.separatorStyles,s=this.getFilteredLinks();return d.a.createElement("ol",{className:a()("rc-Breadcrumbs inline",t)},s.map((function(e,t){var a=[d.a.createElement("li",null,e.href?d.a.createElement(p.a,{className:r,to:e.href,onClick:e.onClick||h},e.label):d.a.createElement("span",{className:r},e.label))];return t!==s.length-1&&a.push(d.a.createElement("li",n()({},Object(c.d)("divider",i),{"aria-hidden":!0}),o||"/")),a})))},Breadcrumbs}(d.a.Component),S=t("wig9"),v=t.n(S),I=t("AeFk"),y=t("8Hdl"),j=t("fAYU"),O=t("VS/1"),T,x=function(e){function Breadcrumbs(){return e.apply(this,arguments)||this}var t;return i()(Breadcrumbs,e),Breadcrumbs.prototype.render=function render(){var e=this.props,t=e.className,r=e.linkClassName,o=e.links,i=e.separator,s=e.separatorStyles,u=v()(o);return Object(I.d)("nav",{"aria-label":"Breadcrumbs"},Object(I.d)("ol",{className:a()("rc-Breadcrumbs inline",t)},u.map((function(e,t){var o=[Object(I.d)(y.a,{component:"li"},e.href?Object(I.d)(j.a,{variant:"quiet",component:p.a,className:r,to:e.href},e.label):Object(I.d)("span",n()({},t===u.length-1&&{"aria-current":"page"},{className:r}),e.label))];return t!==u.length-1&&o.push(Object(I.d)("li",n()({},Object(c.d)("divider",s),{"aria-hidden":!0}),i||T||(T=Object(I.d)(O.a,{size:"small"})))),o}))))},Breadcrumbs}(d.a.Component);t.d(e,"a",(function(){return x}));var F=g},zwd1:function(module,e,t){"use strict";var r=t("VbXa"),n=t.n(r),o=t("AeFk"),i=t("F/us"),s=t.n(i),a=t("17x9"),c=t.n(a),u=t("q1tI"),d=t.n(u),l=t("sQ/U"),p=t("3tO9"),m=t.n(p),b=t("S+eF"),h=t.n(b),f=t("TSOT"),g=t("2BcA"),S=Object(f.a)("/api/onDemandCourseForumSubscriptions.v1",{type:"rest"}),v=Object(f.a)("/api/onDemandMentorForumSubscriptions.v1",{type:"rest"}),I=Object(f.a)("/api/groupForumSubscriptions.v1",{type:"rest"}),y,j,O,T=function getSubscription(e,t){return t===g.j.mentorForumType?h()(v.get(e)):t===g.j.groupForumType?h()(I.get(e)):h()(S.get(e))},x=function subscribe(e,t){return t===g.j.mentorForumType?h()(v.put(e)):t===g.j.groupForumType?h()(I.put(e)):h()(S.put(e))},F=function unsubscribe(e,t){return t===g.j.mentorForumType?h()(v.delete(e)):t===g.j.groupForumType?h()(I.delete(e)):h()(S.delete(e))},w=function getForumSubscription(e,t){return T(e,t).then((function(e){return Object.assign(e.elements[0],{isSubscribed:!0})})).catch((function(t){if(404===t.status)return{id:e,isSubscribed:!1};throw t}))},N=function subscribeUserToEntity(e,t){if(l.a.isAuthenticatedUser())return x(e,t)},k=function unsubscribeUserFromEntity(e,t){if(l.a.isAuthenticatedUser())return F(e,t)},D=function fetchSubscriptionForForum(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(l.a.isAuthenticatedUser())return w(r,n).then((function(t){e.dispatch("UPDATE_SUBSCRIPTION",t)})).catch((function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)}));return Promise.reject(new Error("User not authenticated"))},A=function addSubscription(e,t){var r=t.forumSubscriptionId,n=t.forumType;if(l.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isInProgress:!0}),N(r,n).then((function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:r,isSubscribed:!0})})).catch((function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)}));return Promise.reject(new Error("User not authenticated"))},C=function deleteSubscription(e,t){var r=t.subscription,n=t.forumSubscriptionId,o=t.forumType;if(l.a.isAuthenticatedUser())return e.dispatch("UPDATE_SUBSCRIPTION",m()(m()({},r),{},{isInProgress:!0})),k(n,o).then((function(){e.dispatch("UPDATE_SUBSCRIPTION",{id:n,isSubscribed:!1})})).catch((function(t){e.dispatch("UPDATE_SUBSCRIPTION_FAILED",t)}));return Promise.reject(new Error("User not authenticated"))},P=t("ZJgU"),E=t("8xbv"),U=t("q5zD"),q=t("8cuT"),B=t("GP6s"),R=t.n(B),M=t("hSS9"),V,L;function SubscribeButton(e){var t=e.onClick,r=e.className,n=e.isSubscriptionInProgress,i=e.isSubscribed,s=e.subscription,a=i?R()("Unsubscribe"):R()("Subscribe"),c,u=!n&&null===s?R()("Error"):a;if(n)return V||(V=Object(o.d)(U.a,{name:"spinner",className:"cif-spin"}));return Object(o.d)(P.a,{className:r,type:"button",size:"small",variant:"ghost",onClick:t,disabled:!s,icon:n&&(L||(L=Object(o.d)(E.a,{size:"small"}))),iconPosition:n&&"after"},u)}var z=function(e){function ForumsV2SubscriptionButton(t,r){var n;return(n=e.call(this,t,r)||this).toggleSubscription=function(){var e=n.props,t=e.isSubscribed,r=e.forumType,o=e.subscription,i=e.forumSubscriptionId;t?(n.context.executeAction(C,{subscription:o,forumSubscriptionId:i,forumType:r}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:R()("You will no longer receive emails whenever new threads are added.")})):(n.context.executeAction(A,{forumType:r,forumSubscriptionId:i}),n.setState({showSubscriptionDetails:!0,subscriptionDetails:R()("You will receive emails whenever new threads are added.")}))},n.state={subscriptionDetails:{},showSubscriptionDetails:!1},n}n()(ForumsV2SubscriptionButton,e);var t=ForumsV2SubscriptionButton.prototype;return t.componentDidMount=function componentDidMount(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(D,{forumType:n,forumSubscriptionId:r}))},t.componentDidUpdate=function componentDidUpdate(){var e=this.props,t=e.subscription,r=e.forumSubscriptionId,n=e.forumType;null!==t&&(t||this.context.executeAction(D,{forumType:n,forumSubscriptionId:r}))},t.render=function render(){var e=this.props,t=e.subscription,r=e.isSubscribed,n=e.hasError,i=e.isSubscriptionInProgress,s=this.state,a=s.showSubscriptionDetails,c=s.subscriptionDetails;return Object(o.d)("div",{className:"rc-ForumsV2__SubscriptionButton horizontal-box vertical-when-mobile align-items-vertical-center"},Object(o.d)(SubscribeButton,{className:"subscription-button",onClick:this.toggleSubscription,disabled:!t,isSubscriptionInProgress:i,subscription:t,isSubscribed:r}),!n&&a&&Object(o.d)("div",{className:"message caption-text"},c),n&&Object(o.d)("div",{className:"errorMessage"},R()("Sorry, something went wrong. Try again.")),a&&Object(o.d)("span",{className:"screenreader-only","aria-live":"polite"},t&&!i&&r?R()("Subscribed, You will receive emails whenever new threads are added."):R()("Unsubscribed, You will no longer receive emails whenever new threads are added.")))},ForumsV2SubscriptionButton}(d.a.Component);z.contextTypes={executeAction:c.a.func.isRequired};var J=e.a=s.a.compose(Object(q.a)(["SubscriptionStore","CourseMembershipStore","CourseStore"],(function(e,t){var r=e.SubscriptionStore,n=null==t?void 0:t.forumId,o=n&&n.split("~"),i=n&&"".concat(l.a.get().id,"~").concat(o[0],"~").concat(o[1]),s=l.a.isAuthenticatedUser();return{forumSubscriptionId:i,hasError:r.hasError(),subscription:s&&!r.hasError()?r.getSubscription(i):null,isSubscribed:s&&!r.hasError()?r.getIsSubscribed(i):null,isSubscriptionInProgress:s&&!r.hasError()?r.getIsSubscriptionInProgress(i):null}})))(z)}}]);
//# sourceMappingURL=7.87fb47088f60ef65c1f3.js.map